<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok & Amazon çƒ­é”€æœè£…æ•°æ®å¯è§†åŒ–ä»ªè¡¨æ¿</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .hover-scale:hover {
            transform: scale(1.02);
            transition: all 0.3s ease;
        }
        .sidebar-collapsed {
            transform: translateX(-240px);
        }
        .dark {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        .dark .bg-white {
            background-color: #2d3748;
        }
        .dark .text-gray-900 {
            color: #e2e8f0;
        }
        .dark .border-gray-200 {
            border-color: #4a5568;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <div class="flex h-screen">
        <!-- ä¾§è¾¹æ  -->
        <div id="sidebar" class="fixed left-0 top-0 h-full bg-white shadow-lg transition-all duration-300 w-64 z-30 border-r border-gray-200">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-xl font-bold text-gray-900">æœè£…æ•°æ®å¹³å°</h1>
                        <p class="text-sm text-gray-500">TikTok & Amazon</p>
                    </div>
                    <button id="sidebarToggle" class="p-2 rounded-lg hover:bg-gray-100">
                        <i class="fas fa-times text-gray-600"></i>
                    </button>
                </div>
            </div>
            <nav class="mt-6">
                <a href="#" onclick="showPage('dashboard')" class="flex items-center px-6 py-3 text-blue-700 bg-blue-50 border-r-2 border-blue-700">
                    <i class="fas fa-tachometer-alt mr-3"></i>
                    <span>ä»ªè¡¨æ¿</span>
                </a>
                <a href="#" onclick="showPage('products')" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
                    <i class="fas fa-box mr-3"></i>
                    <span>äº§å“åˆ—è¡¨</span>
                </a>
                <a href="#" onclick="showPage('price-analysis')" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
                    <i class="fas fa-chart-line mr-3"></i>
                    <span>ä»·æ ¼åˆ†æ</span>
                </a>
                <a href="#" onclick="showPage('platform-comparison')" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
                    <i class="fas fa-balance-scale mr-3"></i>
                    <span>å¹³å°å¯¹æ¯”</span>
                </a>
                <a href="#" onclick="showPage('ranking')" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-50">
                    <i class="fas fa-trophy mr-3"></i>
                    <span>çƒ­åº¦æ’è¡Œ</span>
                </a>
            </nav>
            <div class="absolute bottom-4 left-4 right-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-3 border border-blue-200">
                <div class="text-sm font-medium text-gray-900">å®æ—¶æ•°æ®ç›‘æ§</div>
                <div class="text-xs text-gray-600">æ•°æ®æ›´æ–°: æ¯å°æ—¶</div>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div id="mainContent" class="flex-1 ml-64 transition-all duration-300">
            <!-- é¡¶éƒ¨å¯¼èˆª -->
            <header class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <button id="mobileSidebarToggle" class="p-2 rounded-lg hover:bg-gray-100 lg:hidden">
                            <i class="fas fa-bars text-gray-600"></i>
                        </button>
                        <div class="relative hidden md:block">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="text" placeholder="æœç´¢äº§å“ã€åº—é“ºæˆ–å…³é”®è¯..." 
                                   class="pl-10 pr-4 py-2 w-80 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button onclick="toggleTheme()" class="p-2 rounded-lg hover:bg-gray-100">
                            <i class="fas fa-moon text-gray-600" id="themeIcon"></i>
                        </button>
                        <button class="p-2 rounded-lg hover:bg-gray-100 relative">
                            <i class="fas fa-bell text-gray-600"></i>
                            <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                        </button>
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-white text-sm"></i>
                            </div>
                            <div class="hidden md:block">
                                <div class="text-sm font-medium text-gray-900">ç®¡ç†å‘˜</div>
                                <div class="text-xs text-gray-500">è¶…çº§ç”¨æˆ·</div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- ä¸»å†…å®¹ -->
            <main class="flex-1 overflow-auto p-6">
                <!-- ä»ªè¡¨æ¿é¡µé¢ -->
                <div id="dashboardPage" class="page">
                    <div class="mb-6">
                        <h1 class="text-3xl font-bold text-gray-900">æ•°æ®ä»ªè¡¨æ¿</h1>
                        <p class="text-gray-600 mt-2">TikTok & Amazon çƒ­é”€æœè£…æ•°æ®æ¦‚è§ˆ</p>
                    </div>

                    <!-- ç»Ÿè®¡å¡ç‰‡ -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-blue-100 rounded-lg">
                                    <i class="fas fa-box text-blue-600"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-600">æ€»äº§å“æ•°</p>
                                    <p class="text-2xl font-bold text-gray-900" id="totalProducts">445</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-green-100 rounded-lg">
                                    <i class="fas fa-users text-green-600"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-600">æ´»è·ƒäº§å“</p>
                                    <p class="text-2xl font-bold text-gray-900" id="activeProducts">445</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-yellow-100 rounded-lg">
                                    <i class="fas fa-trending-up text-yellow-600"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-600">ä»Šæ—¥æ–°å¢</p>
                                    <p class="text-2xl font-bold text-gray-900" id="todayNew">12</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-2 bg-purple-100 rounded-lg">
                                    <i class="fas fa-database text-purple-600"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-600">æ•°æ®åº“å¤§å°</p>
                                    <p class="text-2xl font-bold text-gray-900"><span id="dbSize">2.4</span>MB</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å›¾è¡¨åŒºåŸŸ -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">å¹³å°åˆ†ç±»åˆ†å¸ƒ</h3>
                            <canvas id="platformChart" width="400" height="200"></canvas>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">äº§å“åˆ†ç±»å æ¯”</h3>
                            <canvas id="categoryChart" width="400" height="200"></canvas>
                        </div>
                    </div>

                    <!-- ä»·æ ¼è¶‹åŠ¿ -->
                    <div class="bg-white rounded-lg shadow p-6 mt-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">è¿‘æœŸä»·æ ¼è¶‹åŠ¿</h3>
                        <canvas id="priceChart" width="800" height="300"></canvas>
                    </div>
                </div>

                <!-- äº§å“åˆ—è¡¨é¡µé¢ -->
                <div id="productsPage" class="page hidden">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h1 class="text-3xl font-bold text-gray-900">äº§å“åˆ—è¡¨</h1>
                            <p class="text-gray-600 mt-2">æµè§ˆå’Œç®¡ç†æ‰€æœ‰äº§å“æ•°æ®</p>
                        </div>
                        <div class="text-sm text-gray-500" id="productCount">å…± 6 ä¸ªäº§å“</div>
                    </div>

                    <!-- ç­›é€‰å’Œæœç´¢ -->
                    <div class="bg-white rounded-lg shadow p-6 mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div class="relative">
                                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                <input type="text" id="productSearch" placeholder="æœç´¢äº§å“åç§°æˆ–åº—é“º..." 
                                       class="pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <select id="platformFilter" class="px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="all">æ‰€æœ‰å¹³å°</option>
                                <option value="tiktok">TikTok</option>
                                <option value="amazon">Amazon</option>
                            </select>
                            <select id="categoryFilter" class="px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="all">æ‰€æœ‰åˆ†ç±»</option>
                                <option value="tshirt">Tæ¤</option>
                                <option value="hoodie">å«è¡£</option>
                                <option value="sweatshirt">è¿å¸½è¡«</option>
                            </select>
                            <select id="sortFilter" class="px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="recent">æœ€è¿‘æ›´æ–°</option>
                                <option value="sales_desc">é”€é‡æ’åº</option>
                                <option value="rating_desc">è¯„åˆ†æ’åº</option>
                                <option value="price_asc">ä»·æ ¼ä»ä½åˆ°é«˜</option>
                            </select>
                        </div>
                    </div>

                    <!-- äº§å“ç½‘æ ¼ -->
                    <div id="productsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        <!-- äº§å“å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <!-- å…¶ä»–é¡µé¢çš„å ä½ç¬¦ -->
                <div id="priceAnalysisPage" class="page hidden">
                    <div class="mb-6">
                        <h1 class="text-3xl font-bold text-gray-900">ä»·æ ¼åˆ†æ</h1>
                        <p class="text-gray-600 mt-2">ä»·æ ¼è¶‹åŠ¿å’Œå¸‚åœºåˆ†æ</p>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <canvas id="priceAnalysisChart" width="800" height="400"></canvas>
                    </div>
                </div>

                <div id="platformComparisonPage" class="page hidden">
                    <div class="mb-6">
                        <h1 class="text-3xl font-bold text-gray-900">å¹³å°å¯¹æ¯”åˆ†æ</h1>
                        <p class="text-gray-600 mt-2">TikTok vs Amazon æ•°æ®å¯¹æ¯”</p>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <canvas id="platformComparisonChart" width="400" height="300"></canvas>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <canvas id="platformDistributionChart" width="400" height="300"></canvas>
                        </div>
                    </div>
                </div>

                <div id="rankingPage" class="page hidden">
                    <div class="mb-6">
                        <h1 class="text-3xl font-bold text-gray-900">çƒ­åº¦æ’è¡Œ</h1>
                        <p class="text-gray-600 mt-2">åŸºäºé”€é‡å’Œè¯„åˆ†çš„çƒ­é—¨äº§å“æ’è¡Œ</p>
                    </div>
                    <div class="bg-white rounded-lg shadow">
                        <div class="p-6 border-b border-gray-200">
                            <h2 class="text-lg font-semibold">çƒ­é—¨äº§å“æ’è¡Œæ¦œ</h2>
                        </div>
                        <div id="rankingList" class="divide-y divide-gray-200">
                            <!-- æ’è¡Œåˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        // å…¨å±€æ•°æ®
        let productsData = [];
        let currentTheme = 'light';

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            initializeCharts();
            setupEventListeners();
        });

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // ä¾§è¾¹æ åˆ‡æ¢
            document.getElementById('sidebarToggle').addEventListener('click', toggleSidebar);
            document.getElementById('mobileSidebarToggle').addEventListener('click', toggleSidebar);

            // äº§å“ç­›é€‰
            document.getElementById('productSearch').addEventListener('input', filterProducts);
            document.getElementById('platformFilter').addEventListener('change', filterProducts);
            document.getElementById('categoryFilter').addEventListener('change', filterProducts);
            document.getElementById('sortFilter').addEventListener('change', filterProducts);
        }

        // åŠ è½½æ•°æ®
        async function loadData() {
            try {
                // ä½¿ç”¨å†…åµŒçš„ç¤ºä¾‹æ•°æ®
                productsData = [
                    {
                        id: 1,
                        product_name: "æ—¶å°šå°èŠ±Tæ¤ - æ½®æµè®¾è®¡",
                        platform: "tiktok",
                        category: "tshirt",
                        price: 29.99,
                        original_price: 39.99,
                        sales_count: 15420,
                        rating: 4.5,
                        review_count: 2890,
                        store_name: "Fashion Pro",
                        main_image_url: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400",
                        product_url: "https://tiktok.com/shop/product/1"
                    },
                    {
                        id: 2,
                        product_name: "ä¼‘é—²è¿å¸½å«è¡£ - å®½æ¾ç‰ˆå‹",
                        platform: "amazon",
                        category: "hoodie",
                        price: 49.99,
                        original_price: 69.99,
                        sales_count: 8750,
                        rating: 4.2,
                        review_count: 1640,
                        store_name: "CozyWear",
                        main_image_url: "https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=400",
                        product_url: "https://amazon.com/dp/B08457890"
                    },
                    {
                        id: 3,
                        product_name: "è¿åŠ¨å°èŠ±Tæ¤ - é€Ÿå¹²é¢æ–™",
                        platform: "tiktok",
                        category: "tshirt",
                        price: 24.99,
                        original_price: 34.99,
                        sales_count: 12300,
                        rating: 4.6,
                        review_count: 2150,
                        store_name: "SportyFit",
                        main_image_url: "https://images.unsplash.com/photo-1603215601659-7b5efbd83fc2?w=400",
                        product_url: "https://tiktok.com/shop/product/3"
                    },
                    {
                        id: 4,
                        product_name: "ä¿æš–å«è¡£ - æŠ“ç»’å†…é‡Œ",
                        platform: "amazon",
                        category: "hoodie",
                        price: 59.99,
                        original_price: 79.99,
                        sales_count: 9840,
                        rating: 4.4,
                        review_count: 3420,
                        store_name: "WarmClothes",
                        main_image_url: "https://images.unsplash.com/photo-1583743814966-8936f5b7be1a?w=400",
                        product_url: "https://amazon.com/dp/B08467901"
                    },
                    {
                        id: 5,
                        product_name: "åŸºç¡€æ¬¾åœ†é¢†Tæ¤ - å¤šè‰²å¯é€‰",
                        platform: "tiktok",
                        category: "tshirt",
                        price: 19.99,
                        original_price: 29.99,
                        sales_count: 18750,
                        rating: 4.1,
                        review_count: 4280,
                        store_name: "BasicStyle",
                        main_image_url: "https://images.unsplash.com/photo-1503342217505-b0a15cf70489?w=400",
                        product_url: "https://tiktok.com/shop/product/5"
                    },
                    {
                        id: 6,
                        product_name: "å¼€è¡«å«è¡£ - æ‹‰é“¾è®¾è®¡",
                        platform: "amazon",
                        category: "sweatshirt",
                        price: 44.99,
                        original_price: 59.99,
                        sales_count: 6750,
                        rating: 4.3,
                        review_count: 1890,
                        store_name: "ZipperedStyle",
                        main_image_url: "https://images.unsplash.com/photo-1508923567004-3a6b8004dc1d?w=400",
                        product_url: "https://amazon.com/dp/B08467912"
                    }
                ];

                renderProducts(productsData);
                renderRankingList(productsData);
            } catch (error) {
                console.error('Failed to load data:', error);
            }
        }

        // åˆå§‹åŒ–å›¾è¡¨
        function initializeCharts() {
            // å¹³å°åˆ†ç±»åˆ†å¸ƒå›¾
            const platformCtx = document.getElementById('platformChart').getContext('2d');
            new Chart(platformCtx, {
                type: 'bar',
                data: {
                    labels: ['TikTok-Tæ¤', 'TikTok-å«è¡£', 'Amazon-Tæ¤', 'Amazon-å«è¡£', 'Amazon-è¿å¸½è¡«'],
                    datasets: [{
                        label: 'äº§å“æ•°é‡',
                        data: [3, 2, 1, 2, 1],
                        backgroundColor: ['#EF4444', '#EF4444', '#FF9500', '#FF9500', '#FF9500']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            // åˆ†ç±»å æ¯”é¥¼å›¾
            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            new Chart(categoryCtx, {
                type: 'pie',
                data: {
                    labels: ['Tæ¤', 'å«è¡£', 'è¿å¸½è¡«'],
                    datasets: [{
                        data: [4, 2, 1],
                        backgroundColor: ['#3B82F6', '#10B981', '#8B5CF6']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            // ä»·æ ¼è¶‹åŠ¿å›¾
            const priceCtx = document.getElementById('priceChart').getContext('2d');
            new Chart(priceCtx, {
                type: 'line',
                data: {
                    labels: ['11/8', '11/9', '11/10', '11/11', '11/12', '11/13', '11/14'],
                    datasets: [{
                        label: 'å¹³å‡ä»·æ ¼',
                        data: [34.67, 35.89, 36.12, 34.56, 35.67, 36.23, 35.45],
                        borderColor: '#10B981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        // é¡µé¢åˆ‡æ¢
        function showPage(pageName) {
            // éšè—æ‰€æœ‰é¡µé¢
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.add('hidden'));

            // æ˜¾ç¤ºæŒ‡å®šé¡µé¢
            const targetPage = document.getElementById(pageName + 'Page');
            if (targetPage) {
                targetPage.classList.remove('hidden');
            }

            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            const navLinks = document.querySelectorAll('nav a');
            navLinks.forEach(link => {
                link.classList.remove('text-blue-700', 'bg-blue-50', 'border-r-2', 'border-blue-700');
                link.classList.add('text-gray-700');
            });

            // é«˜äº®å½“å‰é¡µé¢
            const currentLink = document.querySelector(`nav a[onclick="showPage('${pageName}')"]`);
            if (currentLink) {
                currentLink.classList.remove('text-gray-700');
                currentLink.classList.add('text-blue-700', 'bg-blue-50', 'border-r-2', 'border-blue-700');
            }
        }

        // ä¾§è¾¹æ åˆ‡æ¢
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            if (sidebar.classList.contains('sidebar-collapsed')) {
                sidebar.classList.remove('sidebar-collapsed');
                mainContent.classList.remove('ml-0');
                mainContent.classList.add('ml-64');
            } else {
                sidebar.classList.add('sidebar-collapsed');
                mainContent.classList.remove('ml-64');
                mainContent.classList.add('ml-0');
            }
        }

        // ä¸»é¢˜åˆ‡æ¢
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('themeIcon');
            
            if (currentTheme === 'light') {
                body.classList.add('dark');
                themeIcon.className = 'fas fa-sun text-gray-600';
                currentTheme = 'dark';
            } else {
                body.classList.remove('dark');
                themeIcon.className = 'fas fa-moon text-gray-600';
                currentTheme = 'light';
            }
        }

        // æ¸²æŸ“äº§å“åˆ—è¡¨
        function renderProducts(products) {
            const productsGrid = document.getElementById('productsGrid');
            const productCount = document.getElementById('productCount');
            
            productsGrid.innerHTML = '';
            productCount.textContent = `å…± ${products.length} ä¸ªäº§å“`;

            products.forEach(product => {
                const discount = product.original_price ? Math.round((1 - product.price / product.original_price) * 100) : 0;
                const platformColor = product.platform === 'tiktok' ? 'bg-pink-100 text-pink-800' : 'bg-orange-100 text-orange-800';
                const categoryColor = {
                    'tshirt': 'bg-blue-100 text-blue-800',
                    'hoodie': 'bg-green-100 text-green-800',
                    'sweatshirt': 'bg-purple-100 text-purple-800'
                }[product.category] || 'bg-gray-100 text-gray-800';

                const productCard = `
                    <div class="bg-white rounded-lg shadow hover:shadow-lg transition-shadow duration-200">
                        <div class="relative aspect-square overflow-hidden rounded-t-lg">
                            <img src="${product.main_image_url}" alt="${product.product_name}" 
                                 class="w-full h-full object-cover"
                                 onerror="this.src='https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400'">
                            ${discount > 0 ? `<div class="absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">-${discount}%</div>` : ''}
                        </div>
                        <div class="p-4">
                            <div class="flex gap-2 mb-2">
                                <span class="px-2 py-1 text-xs rounded-full ${platformColor}">
                                    ${product.platform === 'tiktok' ? 'TikTok' : 'Amazon'}
                                </span>
                                <span class="px-2 py-1 text-xs rounded-full ${categoryColor}">
                                    ${product.category === 'tshirt' ? 'Tæ¤' : 
                                      product.category === 'hoodie' ? 'å«è¡£' : 'è¿å¸½è¡«'}
                                </span>
                            </div>
                            <h3 class="font-semibold text-gray-900 mb-2 line-clamp-2">${product.product_name}</h3>
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center">
                                    <i class="fas fa-star text-yellow-400 fill-current w-4 h-4"></i>
                                    <span class="text-sm text-gray-600 ml-1">${product.rating}</span>
                                    <span class="text-sm text-gray-500 ml-2">(${product.review_count} è¯„ä»·)</span>
                                </div>
                                <div class="text-sm text-gray-600">
                                    ${product.sales_count.toLocaleString()} é”€é‡
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="flex items-center space-x-2">
                                    <span class="text-xl font-bold text-red-600">$${product.price.toFixed(2)}</span>
                                    ${product.original_price ? `<span class="text-sm text-gray-500 line-through">$${product.original_price.toFixed(2)}</span>` : ''}
                                </div>
                            </div>
                            ${product.store_name ? `<div class="text-sm text-gray-600 mb-3"><span class="font-medium">åº—é“º:</span> ${product.store_name}</div>` : ''}
                            <div class="flex space-x-2">
                                <button class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-3 rounded-lg text-sm transition-colors">
                                    æŸ¥çœ‹è¯¦æƒ…
                                </button>
                                <button class="p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-heart text-gray-600"></i>
                                </button>
                            </div>
                            ${product.product_url ? `
                                <div class="mt-2">
                                    <a href="${product.product_url}" target="_blank" 
                                       class="flex items-center text-sm text-blue-600 hover:underline">
                                        <i class="fas fa-external-link-alt w-3 h-3 mr-1"></i>
                                        æŸ¥çœ‹åŸé“¾æ¥
                                    </a>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
                productsGrid.innerHTML += productCard;
            });
        }

        // äº§å“ç­›é€‰
        function filterProducts() {
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const platformFilter = document.getElementById('platformFilter').value;
            const categoryFilter = document.getElementById('categoryFilter').value;
            const sortFilter = document.getElementById('sortFilter').value;

            let filtered = productsData.filter(product => {
                const matchesSearch = product.product_name.toLowerCase().includes(searchTerm) ||
                                    (product.store_name && product.store_name.toLowerCase().includes(searchTerm));
                const matchesPlatform = platformFilter === 'all' || product.platform === platformFilter;
                const matchesCategory = categoryFilter === 'all' || product.category === categoryFilter;
                
                return matchesSearch && matchesPlatform && matchesCategory;
            });

            // æ’åº
            switch (sortFilter) {
                case 'sales_desc':
                    filtered.sort((a, b) => b.sales_count - a.sales_count);
                    break;
                case 'rating_desc':
                    filtered.sort((a, b) => b.rating - a.rating);
                    break;
                case 'price_asc':
                    filtered.sort((a, b) => a.price - b.price);
                    break;
                case 'price_desc':
                    filtered.sort((a, b) => b.price - a.price);
                    break;
            }

            renderProducts(filtered);
        }

        // æ¸²æŸ“æ’è¡Œæ¦œ
        function renderRankingList(products) {
            const rankingList = document.getElementById('rankingList');
            const sortedProducts = [...products].sort((a, b) => {
                const scoreA = a.sales_count * 0.6 + a.rating * 1000;
                const scoreB = b.sales_count * 0.6 + b.rating * 1000;
                return scoreB - scoreA;
            });

            rankingList.innerHTML = '';
            sortedProducts.forEach((product, index) => {
                const platformColor = product.platform === 'tiktok' ? 'bg-pink-100 text-pink-800' : 'bg-orange-100 text-orange-800';
                const categoryColor = {
                    'tshirt': 'bg-blue-100 text-blue-800',
                    'hoodie': 'bg-green-100 text-green-800',
                    'sweatshirt': 'bg-purple-100 text-purple-800'
                }[product.category] || 'bg-gray-100 text-gray-800';

                const rankingItem = `
                    <div class="p-6 hover:bg-gray-50 transition-colors">
                        <div class="flex items-center space-x-4">
                            <div class="flex-shrink-0">
                                <div class="w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold ${index < 3 ? 'bg-yellow-100 text-yellow-800' : 'bg-blue-100 text-blue-800'}">
                                    ${index < 3 ? 
                                        (index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : 'ğŸ¥‰') : 
                                        index + 1
                                    }
                                </div>
                            </div>
                            <div class="flex-shrink-0">
                                <img src="${product.main_image_url}" alt="${product.product_name}" 
                                     class="w-16 h-16 rounded-lg object-cover"
                                     onerror="this.src='https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=80'">
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-start justify-between">
                                    <div class="flex-1">
                                        <h3 class="text-lg font-semibold text-gray-900 mb-1">${product.product_name}</h3>
                                        <div class="flex items-center space-x-2 mb-2">
                                            <span class="px-2 py-1 text-xs rounded-full ${platformColor}">
                                                ${product.platform === 'tiktok' ? 'TikTok' : 'Amazon'}
                                            </span>
                                            <span class="px-2 py-1 text-xs rounded-full ${categoryColor}">
                                                ${product.category === 'tshirt' ? 'Tæ¤' : 
                                                  product.category === 'hoodie' ? 'å«è¡£' : 'è¿å¸½è¡«'}
                                            </span>
                                        </div>
                                        <div class="flex items-center space-x-4 text-sm text-gray-600">
                                            <div class="flex items-center">
                                                <i class="fas fa-star text-yellow-400 fill-current mr-1"></i>
                                                <span>${product.rating} (${product.review_count})</span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-shopping-cart mr-1"></i>
                                                <span>${product.sales_count.toLocaleString()} é”€é‡</span>
                                            </div>
                                            ${product.store_name ? `<span>åº—é“º: ${product.store_name}</span>` : ''}
                                        </div>
                                    </div>
                                    <div class="flex-shrink-0 text-right">
                                        <div class="text-xl font-bold text-red-600 mb-1">$${product.price.toFixed(2)}</div>
                                        <div class="text-sm text-gray-600 mb-3">
                                            ç»¼åˆè¯„åˆ†: ${(product.sales_count * 0.6 + product.rating * 1000).toFixed(0)}
                                        </div>
                                        <div class="flex space-x-2">
                                            <button class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-md transition-colors">
                                                æŸ¥çœ‹
                                            </button>
                                            ${product.product_url ? `
                                                <a href="${product.product_url}" target="_blank"
                                                   class="px-3 py-1 border border-gray-300 text-gray-700 text-sm rounded-md hover:bg-gray-50 transition-colors flex items-center">
                                                    <i class="fas fa-external-link-alt w-3 h-3 mr-1"></i>
                                                    é“¾æ¥
                                                </a>
                                            ` : ''}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                rankingList.innerHTML += rankingItem;
            });
        }
    </script>
</body>
</html>
